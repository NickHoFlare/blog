<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/blog/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/blog/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/blog/favicon/favicon-16x16.png"/><link rel="manifest" href="/blog/favicon/site.webmanifest"/><link rel="mask-icon" href="/blog/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/blog/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/blog/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="A blog by Nicholas Ho"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Hello World! | Next.js Blog Example with Markdown</title><meta property="og:image" content="/assets/blog/hello-world/cover.jpg"/><meta name="next-head-count" content="16"/><link rel="preload" href="/blog/_next/static/css/66b8748685bbd4c9e023.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/66b8748685bbd4c9e023.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/6f4272a048091359c753.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/6f4272a048091359c753.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/blog/_next/static/chunks/webpack-13a74dfbcf83781d993e.js" defer=""></script><script src="/blog/_next/static/chunks/framework-92300432a1172ef1338b.js" defer=""></script><script src="/blog/_next/static/chunks/main-ee1d8f01f40175d2602f.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-ddeab55d3c9368b0a4ce.js" defer=""></script><script src="/blog/_next/static/chunks/9f96d65d-7a2bc5bf0bcd1588504d.js" defer=""></script><script src="/blog/_next/static/chunks/118-c3639db2baa4cf57fafb.js" defer=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-8de7a767a52db71fe9ab.js" defer=""></script><script src="/blog/_next/static/z124RXX_Exj-9IJKkUsBK/_buildManifest.js" defer=""></script><script src="/blog/_next/static/z124RXX_Exj-9IJKkUsBK/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><main><div class="container mx-auto px-5"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8"><a class="hover:underline" href="/blog">Blog</a>.</h2><article class="mb-32"><h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">Hello World!</h1><div class="hidden md:block md:mb-12"><div class="flex items-center"><img src="/blog/assets/blog/authors/Girdog.png" class="w-12 h-12 rounded-full mr-4" alt="Nicholas Ho"/><div class="text-xl font-bold">Nicholas Ho</div></div></div><div class="mb-8 md:mb-16 sm:mx-0"><div class="sm:mx-0"><img src="/blog/assets/blog/hello-world/cover.jpg" alt="Cover Image for Hello World!" class="shadow-small"/></div></div><div class="max-w-2xl mx-auto"><div class="block md:hidden mb-6"><div class="flex items-center"><img src="/blog/assets/blog/authors/Girdog.png" class="w-12 h-12 rounded-full mr-4" alt="Nicholas Ho"/><div class="text-xl font-bold">Nicholas Ho</div></div></div><div class="mb-6 text-lg"><time dateTime="2021-06-23T21:41:07.322Z">June	23, 2021</time></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__1x9gM"><h2>Hello World!</h2>
<p>You are now reading the first ever post of my dev (and perhaps occasionally other things) blog ü•≥</p>
<p>My name is Nicholas, and I'm currently a Software Engineer at the Commonwealth Bank of Australia. Learning to write software is tough, and writing it well is even tougher. My objective in starting this blog is to provide an account of my learning journeys and sentiments on tech. This will be an account to the learning i've done, and how far i've come. Perhaps someone will stumble across this at some point and even learn a thing or two from the mistakes I've made.</p>
<h2>Straight to business...</h2>
<p>A blog needs content, and what better way to christen a devblog than to talk about how this blog was set up!</p>
<p>At work, I've primarily been working with apps built with Angular and ReactJS, with an ASP.NET back-end, of both the Framework and Core varieties. Personally, I feel much more at home working with back-end concepts, but I enjoy making the occasional foray into front-end land.</p>
<p>I've recently discovered the front-end framework <a href="https://nextjs.org/">NextJS</a>, which is seemingly built on top of ReactJS, yet provides its own flavour to front-end development. A quick executive summary of my understanding of the biggest differences of the two are:</p>
<ul>
<li>React components/views are linked together via the use of React Router, whereas Next provides easy routing capability out of the box.</li>
<li>Next accomodates several flavours of server-side rendering (SSR), such as
<ul>
<li>Static Generation: you get an entirely static site - data is fetched at <em>build time</em>, so there's no need to do work between requests for each page.</li>
<li>Server-side rendering: As opposed to a React Single Page App (SPA)'s <em>client-side rendering (CSR)</em> where Javascript builds the HTML of a page up on the client, SSR is akin to the old-school way of fetching each entire standalone HTML page that has been fully rendered by the server</li>
</ul>
</li>
<li>SSR allows the website to benefit from SEO, since HTML is available for web crawlers to peruse from the get-go, so it has access to all the site metadata etc, as opposed to client-side rendered sites, where such tags are not available on load.</li>
</ul>
<p>This article does a pretty great job at explaining the differences between CSR and SSR: https://www.toptal.com/front-end/client-side-vs-server-side-pre-rendering</p>
<h2>Getting started</h2>
<p>While poking around the documentation of Next.js, I discovered that while using create-next-app to scaffold a new application, you can define a template (there are very many) for the scaffolded app, which can be found on <a href="https://github.com/vercel/next.js/tree/canary/examples">Github</a>.</p>
<p>I saw that there was an example entry for a <a href="https://github.com/vercel/next.js/tree/canary/examples/blog-starter-typescript">"blog starter"</a> and got curious.</p>
<p>This website that you are now reading this blogpost on was created using the aforementioned "blog starter" template. Minimal modification has been done to it, since it appears that all this scaffolded code produces a complete and functional static website, with blogposts written in Markdown. Pretty neat! Because I wanted this blog to be started with as little fuss as possible, I then decided to keep most of the innards of the scaffolded site as-is. Maybe I will make an attempt at creating my own website to host my blog at a later time. For now, this will do.</p>
<h2>Hosting a static site</h2>
<p>One of the first things I tried to do was to chuck the site onto <a href="https://pages.github.com/">GitHub Pages</a>, where you can host static sites for free. Sounds too good to be true! Well.. yes and no.</p>
<p>It's easy to <em>get started</em> with Pages, simply go to your repo's settings and flip the switch on. However, things did not "just work". As it turns out, Pages looks for the static files to be hosted on one of two locations - Root <code>/</code> or a Docs folder <code>/Docs</code>.</p>
<p>My first thought was to naively create a <code>Docs</code> folder in the root level of the repo, and copy the exported website from a <code>next export</code> into the folder, but this method is very manual, and definitely not sustainable! However, I managed to get the site to show up using this method, but all the styles and images were missing, and all links were broken!</p>
<p>After some digging, I found that the issue was that Github Pages had set up a basePath of <code>blog</code> for my site, but the app itself was not configured to account for this basePath - everything was still being delivered from root: <code>/</code> i.e.<code>/</code> for the homepage, <code>/posts</code> for the posts, as opposed to the expected <code>/blog</code> for the homepage and <code>/blog/posts</code> for posts. I needed to figure out a way to set up a basePath with Next!</p>
<h2>Down the rabbit hole</h2>
<p>I am tearing my hair off my head at this point! I experienced many problems with setting up a basePath.</p>
<p>First, I did some fiddling around with environment variables - I want the basepath to be applied only in Production mode, and not in development mode. Setting the <code>NODE_ENV</code> variable directly on my machine caused all sorts of hell to break loose, with archaic errors, the framework seemingly being unable to proceed past rendering beyond <code>_app.tsx</code>. Evidently, something in Next was relying on the value of <code>NODE_ENV</code>. Something was telling me that I was touching stuff that really shouldn't be tampered with!</p>
<p>As it turns out, when running <code>npm run dev</code> i.e. <code>next</code>, it automatically set <code>NODE_ENV</code> to 'development', whereas when making a production build with <code>next build</code>, it builds it with <code>NODE_ENV</code> set to 'production' automatically. Likewise, running <code>next start</code> runs with <code>NODE_ENV</code> set as 'production'. This is really neat! I wish this was better documented though...</p>
<p>Additionally, although I had read that a Next Config entry for <code>AssetPrefix</code> was required to fix the basepath for other assets including and images and other "public" files, for some reason, nothing in the <code>public</code> folder had the basePath applied to it. As a result, the app was in a state where all images were broken, and the favicon didn't show up.</p>
<p>I had to resort to a workaround, which was to create a shared helper function <code>applyBasePathToImage</code> that transforms any URLs by appending the basePath to the front of it.</p>
<p>We obtain the basePath by getting it as config from next.config.js. This is how you get config from a next.config.js:
<a href="https://nextjs.org/docs/api-reference/next.config.js/runtime-configuration">Runtime Configuration</a>.</p>
<p>Essentially, it's as easy as plopping a <code>publicRuntimeConfig</code> into your <code>Next.config.js</code> and obtiaining the config value(s) like so:
<code>const { publicRuntimeConfig } = getConfig();</code></p>
<p>This introduced yet another issue - for some reason upon application of that function to a url, Next started complaining that it could not find the <code>fs</code> module (Node Filesystem), when it was plainly there, and being used successfully by other bits of code in the past.</p>
<p>Following <a href="https://github.com/vercel/next.js/issues/7755#issuecomment-812805708">this bug report</a>, I was able to resolve the <code>fs</code> issue. I can't say that I fully understand the reason why this works, but I suspect it has something to do with <code>fs</code> being invoked in client-side code, which is when it is not available. I'll have to read up on this a little more!</p>
<h2>Deployment</h2>
<p>Now that we understand how environment works in Next and are able to obtain its value at run-time, we finally have a working app from <code>/blog</code>! üéâüéä</p>
<p>The next step is to figure out how to deploy it to Github Pages properly. I decided to use GitHub Actions as my CI/CD tool. It is free of charge to use and way powerful for a small project like this one.</p>
<p>You can create an Actions Workflow by creating a .yaml file in the <code>.github/workflows</code> folder of your repo, following the format defined <a href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions">here</a>.</p>
<p>After a bit of stumbling, I managed to create a Github Actions workflow like so:</p>
<pre><code class="language-yaml">name: Build static Next.JS site
on: [push]
jobs:
  Build-Static-Site:
    runs-on: ubuntu-latest
    steps:
      - run: echo "üéâ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "üêß This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "üîé The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      
      - name: Check out repository code
        uses: actions/checkout@v2 # Default Github-provided action to checkout code from the repo
      
      - run: echo "üí° The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "üñ•Ô∏è The workflow is now ready to test your code on the runner."
      
      # by default, we are plopped on the root directory of the repo.
      # we have to change into the directory containing the app, and install our npm dependencies.
      - name: Install NPM Packages 
        run: |
          cd app
          npm install

      # build and export generates the static HTML files into ./out
      # creating a .nojekyll file is necessary to prevent Jekyll from removing some essential files
      - name: Build and publish static site 
        run: |
          cd app
          npm run build &#x26;&#x26; npm run export &#x26;&#x26; touch ./out/.nojekyll 

      # This action, created by James Ives takes the contents of a designated folder,
      # and dumps it into the root of a branch of your choice.
      # This makes it accessible for deployment to Github Pages!
      - name: Deploy üöÄ
        uses: JamesIves/github-pages-deploy-action@4.1.4
        with:
          branch: gh-pages # The branch the action should deploy to.
          folder: ./app/out # The folder the action should deploy.
      
      - run: echo "üçè This job's status is ${{ job.status }}."
</code></pre>
<p>Some gotchas I encountered while figuring out how were</p>
<ul>
<li>Adding an empty .nojekyll file in my app's folder. This is important since GitHub Pages runs a Jekyll routine upon deployment, which will discard any files/folders that begin with _. Next.JS just so happens to place all Javascript files into a folder named _Next, which Jekyll deletes if the file is not present, which is behaviour we definitely do not want.</li>
<li>Another was how to actually deploy the site properly to a root <code>/</code> or <code>/docs</code> location so that Pages could properly pick that up. Luckily, I stumbled upon this user-developed Github action https://github.com/JamesIves/github-pages-deploy-action that did the job painlessly and cleanly for me.</li>
</ul>
<p>I now have a workflow set up where every commit made (blog post added/updated, or edits to the site itself) triggers the Github Actions workflow to deploy the site with the newest changes/posts, completely automagically!</p>
<p align="center">
  <img src="../../assets/blog/hello-world/great-success.png">
</p>
</div></div></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"><div class="py-8 flex flex-col lg:flex-row items-center">¬© 2021 Nicholas Ho</div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Hello World!","date":"2021-06-23T21:41:07.322Z","slug":"hello-world","author":{"name":"Nicholas Ho","picture":"/assets/blog/authors/Girdog.png"},"content":"\u003ch2\u003eHello World!\u003c/h2\u003e\n\u003cp\u003eYou are now reading the first ever post of my dev (and perhaps occasionally other things) blog ü•≥\u003c/p\u003e\n\u003cp\u003eMy name is Nicholas, and I'm currently a Software Engineer at the Commonwealth Bank of Australia. Learning to write software is tough, and writing it well is even tougher. My objective in starting this blog is to provide an account of my learning journeys and sentiments on tech. This will be an account to the learning i've done, and how far i've come. Perhaps someone will stumble across this at some point and even learn a thing or two from the mistakes I've made.\u003c/p\u003e\n\u003ch2\u003eStraight to business...\u003c/h2\u003e\n\u003cp\u003eA blog needs content, and what better way to christen a devblog than to talk about how this blog was set up!\u003c/p\u003e\n\u003cp\u003eAt work, I've primarily been working with apps built with Angular and ReactJS, with an ASP.NET back-end, of both the Framework and Core varieties. Personally, I feel much more at home working with back-end concepts, but I enjoy making the occasional foray into front-end land.\u003c/p\u003e\n\u003cp\u003eI've recently discovered the front-end framework \u003ca href=\"https://nextjs.org/\"\u003eNextJS\u003c/a\u003e, which is seemingly built on top of ReactJS, yet provides its own flavour to front-end development. A quick executive summary of my understanding of the biggest differences of the two are:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eReact components/views are linked together via the use of React Router, whereas Next provides easy routing capability out of the box.\u003c/li\u003e\n\u003cli\u003eNext accomodates several flavours of server-side rendering (SSR), such as\n\u003cul\u003e\n\u003cli\u003eStatic Generation: you get an entirely static site - data is fetched at \u003cem\u003ebuild time\u003c/em\u003e, so there's no need to do work between requests for each page.\u003c/li\u003e\n\u003cli\u003eServer-side rendering: As opposed to a React Single Page App (SPA)'s \u003cem\u003eclient-side rendering (CSR)\u003c/em\u003e where Javascript builds the HTML of a page up on the client, SSR is akin to the old-school way of fetching each entire standalone HTML page that has been fully rendered by the server\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eSSR allows the website to benefit from SEO, since HTML is available for web crawlers to peruse from the get-go, so it has access to all the site metadata etc, as opposed to client-side rendered sites, where such tags are not available on load.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis article does a pretty great job at explaining the differences between CSR and SSR: https://www.toptal.com/front-end/client-side-vs-server-side-pre-rendering\u003c/p\u003e\n\u003ch2\u003eGetting started\u003c/h2\u003e\n\u003cp\u003eWhile poking around the documentation of Next.js, I discovered that while using create-next-app to scaffold a new application, you can define a template (there are very many) for the scaffolded app, which can be found on \u003ca href=\"https://github.com/vercel/next.js/tree/canary/examples\"\u003eGithub\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eI saw that there was an example entry for a \u003ca href=\"https://github.com/vercel/next.js/tree/canary/examples/blog-starter-typescript\"\u003e\"blog starter\"\u003c/a\u003e and got curious.\u003c/p\u003e\n\u003cp\u003eThis website that you are now reading this blogpost on was created using the aforementioned \"blog starter\" template. Minimal modification has been done to it, since it appears that all this scaffolded code produces a complete and functional static website, with blogposts written in Markdown. Pretty neat! Because I wanted this blog to be started with as little fuss as possible, I then decided to keep most of the innards of the scaffolded site as-is. Maybe I will make an attempt at creating my own website to host my blog at a later time. For now, this will do.\u003c/p\u003e\n\u003ch2\u003eHosting a static site\u003c/h2\u003e\n\u003cp\u003eOne of the first things I tried to do was to chuck the site onto \u003ca href=\"https://pages.github.com/\"\u003eGitHub Pages\u003c/a\u003e, where you can host static sites for free. Sounds too good to be true! Well.. yes and no.\u003c/p\u003e\n\u003cp\u003eIt's easy to \u003cem\u003eget started\u003c/em\u003e with Pages, simply go to your repo's settings and flip the switch on. However, things did not \"just work\". As it turns out, Pages looks for the static files to be hosted on one of two locations - Root \u003ccode\u003e/\u003c/code\u003e or a Docs folder \u003ccode\u003e/Docs\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eMy first thought was to naively create a \u003ccode\u003eDocs\u003c/code\u003e folder in the root level of the repo, and copy the exported website from a \u003ccode\u003enext export\u003c/code\u003e into the folder, but this method is very manual, and definitely not sustainable! However, I managed to get the site to show up using this method, but all the styles and images were missing, and all links were broken!\u003c/p\u003e\n\u003cp\u003eAfter some digging, I found that the issue was that Github Pages had set up a basePath of \u003ccode\u003eblog\u003c/code\u003e for my site, but the app itself was not configured to account for this basePath - everything was still being delivered from root: \u003ccode\u003e/\u003c/code\u003e i.e.\u003ccode\u003e/\u003c/code\u003e for the homepage, \u003ccode\u003e/posts\u003c/code\u003e for the posts, as opposed to the expected \u003ccode\u003e/blog\u003c/code\u003e for the homepage and \u003ccode\u003e/blog/posts\u003c/code\u003e for posts. I needed to figure out a way to set up a basePath with Next!\u003c/p\u003e\n\u003ch2\u003eDown the rabbit hole\u003c/h2\u003e\n\u003cp\u003eI am tearing my hair off my head at this point! I experienced many problems with setting up a basePath.\u003c/p\u003e\n\u003cp\u003eFirst, I did some fiddling around with environment variables - I want the basepath to be applied only in Production mode, and not in development mode. Setting the \u003ccode\u003eNODE_ENV\u003c/code\u003e variable directly on my machine caused all sorts of hell to break loose, with archaic errors, the framework seemingly being unable to proceed past rendering beyond \u003ccode\u003e_app.tsx\u003c/code\u003e. Evidently, something in Next was relying on the value of \u003ccode\u003eNODE_ENV\u003c/code\u003e. Something was telling me that I was touching stuff that really shouldn't be tampered with!\u003c/p\u003e\n\u003cp\u003eAs it turns out, when running \u003ccode\u003enpm run dev\u003c/code\u003e i.e. \u003ccode\u003enext\u003c/code\u003e, it automatically set \u003ccode\u003eNODE_ENV\u003c/code\u003e to 'development', whereas when making a production build with \u003ccode\u003enext build\u003c/code\u003e, it builds it with \u003ccode\u003eNODE_ENV\u003c/code\u003e set to 'production' automatically. Likewise, running \u003ccode\u003enext start\u003c/code\u003e runs with \u003ccode\u003eNODE_ENV\u003c/code\u003e set as 'production'. This is really neat! I wish this was better documented though...\u003c/p\u003e\n\u003cp\u003eAdditionally, although I had read that a Next Config entry for \u003ccode\u003eAssetPrefix\u003c/code\u003e was required to fix the basepath for other assets including and images and other \"public\" files, for some reason, nothing in the \u003ccode\u003epublic\u003c/code\u003e folder had the basePath applied to it. As a result, the app was in a state where all images were broken, and the favicon didn't show up.\u003c/p\u003e\n\u003cp\u003eI had to resort to a workaround, which was to create a shared helper function \u003ccode\u003eapplyBasePathToImage\u003c/code\u003e that transforms any URLs by appending the basePath to the front of it.\u003c/p\u003e\n\u003cp\u003eWe obtain the basePath by getting it as config from next.config.js. This is how you get config from a next.config.js:\n\u003ca href=\"https://nextjs.org/docs/api-reference/next.config.js/runtime-configuration\"\u003eRuntime Configuration\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eEssentially, it's as easy as plopping a \u003ccode\u003epublicRuntimeConfig\u003c/code\u003e into your \u003ccode\u003eNext.config.js\u003c/code\u003e and obtiaining the config value(s) like so:\n\u003ccode\u003econst { publicRuntimeConfig } = getConfig();\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThis introduced yet another issue - for some reason upon application of that function to a url, Next started complaining that it could not find the \u003ccode\u003efs\u003c/code\u003e module (Node Filesystem), when it was plainly there, and being used successfully by other bits of code in the past.\u003c/p\u003e\n\u003cp\u003eFollowing \u003ca href=\"https://github.com/vercel/next.js/issues/7755#issuecomment-812805708\"\u003ethis bug report\u003c/a\u003e, I was able to resolve the \u003ccode\u003efs\u003c/code\u003e issue. I can't say that I fully understand the reason why this works, but I suspect it has something to do with \u003ccode\u003efs\u003c/code\u003e being invoked in client-side code, which is when it is not available. I'll have to read up on this a little more!\u003c/p\u003e\n\u003ch2\u003eDeployment\u003c/h2\u003e\n\u003cp\u003eNow that we understand how environment works in Next and are able to obtain its value at run-time, we finally have a working app from \u003ccode\u003e/blog\u003c/code\u003e! üéâüéä\u003c/p\u003e\n\u003cp\u003eThe next step is to figure out how to deploy it to Github Pages properly. I decided to use GitHub Actions as my CI/CD tool. It is free of charge to use and way powerful for a small project like this one.\u003c/p\u003e\n\u003cp\u003eYou can create an Actions Workflow by creating a .yaml file in the \u003ccode\u003e.github/workflows\u003c/code\u003e folder of your repo, following the format defined \u003ca href=\"https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eAfter a bit of stumbling, I managed to create a Github Actions workflow like so:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-yaml\"\u003ename: Build static Next.JS site\non: [push]\njobs:\n  Build-Static-Site:\n    runs-on: ubuntu-latest\n    steps:\n      - run: echo \"üéâ The job was automatically triggered by a ${{ github.event_name }} event.\"\n      - run: echo \"üêß This job is now running on a ${{ runner.os }} server hosted by GitHub!\"\n      - run: echo \"üîé The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}.\"\n      \n      - name: Check out repository code\n        uses: actions/checkout@v2 # Default Github-provided action to checkout code from the repo\n      \n      - run: echo \"üí° The ${{ github.repository }} repository has been cloned to the runner.\"\n      - run: echo \"üñ•Ô∏è The workflow is now ready to test your code on the runner.\"\n      \n      # by default, we are plopped on the root directory of the repo.\n      # we have to change into the directory containing the app, and install our npm dependencies.\n      - name: Install NPM Packages \n        run: |\n          cd app\n          npm install\n\n      # build and export generates the static HTML files into ./out\n      # creating a .nojekyll file is necessary to prevent Jekyll from removing some essential files\n      - name: Build and publish static site \n        run: |\n          cd app\n          npm run build \u0026#x26;\u0026#x26; npm run export \u0026#x26;\u0026#x26; touch ./out/.nojekyll \n\n      # This action, created by James Ives takes the contents of a designated folder,\n      # and dumps it into the root of a branch of your choice.\n      # This makes it accessible for deployment to Github Pages!\n      - name: Deploy üöÄ\n        uses: JamesIves/github-pages-deploy-action@4.1.4\n        with:\n          branch: gh-pages # The branch the action should deploy to.\n          folder: ./app/out # The folder the action should deploy.\n      \n      - run: echo \"üçè This job's status is ${{ job.status }}.\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSome gotchas I encountered while figuring out how were\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAdding an empty .nojekyll file in my app's folder. This is important since GitHub Pages runs a Jekyll routine upon deployment, which will discard any files/folders that begin with _. Next.JS just so happens to place all Javascript files into a folder named _Next, which Jekyll deletes if the file is not present, which is behaviour we definitely do not want.\u003c/li\u003e\n\u003cli\u003eAnother was how to actually deploy the site properly to a root \u003ccode\u003e/\u003c/code\u003e or \u003ccode\u003e/docs\u003c/code\u003e location so that Pages could properly pick that up. Luckily, I stumbled upon this user-developed Github action https://github.com/JamesIves/github-pages-deploy-action that did the job painlessly and cleanly for me.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI now have a workflow set up where every commit made (blog post added/updated, or edits to the site itself) triggers the Github Actions workflow to deploy the site with the newest changes/posts, completely automagically!\u003c/p\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"../../assets/blog/hello-world/great-success.png\"\u003e\n\u003c/p\u003e\n","ogImage":{"url":"/assets/blog/hello-world/cover.jpg"},"coverImage":"/assets/blog/hello-world/cover.jpg"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"hello-world"},"buildId":"z124RXX_Exj-9IJKkUsBK","assetPrefix":"/blog","runtimeConfig":{"basePath":"/blog"},"isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>